--declare @d datetime2 = '2025-12-31 23:59:59.9983333'
--declare @d datetime2 = '2025-12-31 23:59:59.9983334'
declare @d datetime2(7) = '2025-12-31 23:59:59.9983345'

declare @d datetime2(7) = '2025-12-31 23:59:59.998'

select @d, CAST(@d as datetime)

9983334
9970000
9999999



select 1000- 998.3334, 997.0000 - 998.3334

-- accuracy of datetime 3.33 ms 

select 998.3334 + 3.33, 998.3334 - 3.33


select 998.3334/3.33, 997/3.33, 999/3.33, '|', 998.3334/3.33 - 997/3.33, 999/3.33 - 998.3334/3.33
select 998.3333/3.33, 997/3.33, 999/3.33, '|', 998.3333/3.33 - 997/3.33, 999/3.33 - 998.3333/3.33

select 0 - 0.3334, 0.00333 - 0.3334, 0.00733 - 0.3334, 1-0.3334
select 0 - 0.3333, 0.00333 - 0.3333, 0.00733 - 0.3333,  1-0.3333

select 0.0033333 - 0.9983334, 0.0033333 - 0.9983333



select 0.9999999 - 0.9983333, 0.9999999 - 0.9983334, 0.9970000 - 0.9983333



select 300 - round(0.9983334/0.0016666666666667/2,17) as '1', 300 - round(0.9983333/0.0016666666666667/2,17) as '2', round(0.997/0.0016666666666667/2, 17),
round(0.9983334/0.0016666666666667/2,17) - round(0.997/0.0016666666666667/2, 17) as '1', round(0.9983333/0.0016666666666667/2,17)- round(0.997/0.0016666666666667/2, 17) as '2'


declare @d11 datetime2(7) = '2025-12-31 00:00:00.9983333'
declare @d12 datetime2(7) = '2025-12-31 00:00:00.9983334'
declare @d21 datetime = '2025-12-31 00:00:00.997'
declare @d22 datetime = '2025-12-31 00:00:00.998'
declare @d23 datetime = '2025-12-31 00:00:00.999'



select cast(@d11 as datetime), cast(@d12 as datetime) 
select cast(@d21 as datetime2), cast(@d22 as datetime2) , cast(@d23 as datetime2)

